\documentclass{article}

\usepackage[utf8]{inputenc}
\usepackage{fancyhdr}
\usepackage{extramarks}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{tikz}
\usepackage[plain]{algorithm}
\usepackage{algpseudocode}
\usepackage{listings}

\usetikzlibrary{automata,positioning}

%
% Basic Document Settings
%

\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in

\linespread{1.1}

\pagestyle{fancy}
\lhead{\hmwkAuthorName}
%\chead{\hmwkClass\ (\hmwkClassInstructor\ \hmwkClassTime): \hmwkTitle}
\rhead{\firstxmark}
\lfoot{\lastxmark}
\cfoot{\thepage}

\renewcommand\headrulewidth{0.4pt}
\renewcommand\footrulewidth{0.4pt}

\setlength\parindent{0pt}

%
% Create Problem Sections
%

\newcommand{\enterProblemHeader}[1]{
    \nobreak\extramarks{}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
}

\newcommand{\exitProblemHeader}[1]{
    \nobreak\extramarks{Problem \arabic{#1} (continued)}{Problem \arabic{#1} continued on next page\ldots}\nobreak{}
    \stepcounter{#1}
    \nobreak\extramarks{Problem \arabic{#1}}{}\nobreak{}
}

\setcounter{secnumdepth}{0}
\newcounter{partCounter}
\newcounter{homeworkProblemCounter}
\setcounter{homeworkProblemCounter}{1}
\nobreak\extramarks{Problem \arabic{homeworkProblemCounter}}{}\nobreak{}

%
% Homework Problem Environment
%
% This environment takes an optional argument. When given, it will adjust the
% problem counter. This is useful for when the problems given for your
% assignment aren't sequential. See the last 3 problems of this template for an
% example.
%
\newenvironment{homeworkProblem}[1][-1]{
    \ifnum#1>0
        \setcounter{homeworkProblemCounter}{#1}
    \fi
    \section{Problem \arabic{homeworkProblemCounter}}
    \setcounter{partCounter}{1}
    \enterProblemHeader{homeworkProblemCounter}
}{
    \exitProblemHeader{homeworkProblemCounter}
}

%
% Homework Details
%   - Title
%   - Due date
%   - Class
%   - Section/Time
%   - Instructor
%   - Author
%

\newcommand{\hmwkTitle}{Homework\ \#6}
\newcommand{\hmwkDueDate}{March 14, 2019}
\newcommand{\hmwkClass}{CPE 301}
\newcommand{\hmwkClassTime}{Section 101}
\newcommand{\hmwkClassInstructor}{Dr. Dwight Egbert}
\newcommand{\hmwkAuthorName}{\textbf{Michael DesRoches}}

%
% Title Page
%

\title{
    \vspace{2in}
    \textmd{\textbf{\hmwkClass:\ \hmwkTitle}}\\
    \normalsize\vspace{0.1in}\small{Due\ on\ \hmwkDueDate\ at 9:00am}\\
    \vspace{0.1in}\large{\textit{\hmwkClassInstructor\ \hmwkClassTime}}
    \vspace{3in}
}

\author{\hmwkAuthorName}
\date{}

\renewcommand{\part}[1]{\textbf{\large Part \Alph{partCounter}}\stepcounter{partCounter}\\}


\begin{document}
\maketitle
\pagebreak

\begin{homeworkProblem}

\begin{lstlisting}

Description of Purpose:

Homework 6 intriduces us to web tutorials to help us better understand bit
manipulation and correct code allocation witht the arduino.


1.) Determine the appropriate bit settings for UCSR0A, UCSR0B, UCSR0C,and UBRR0
to manage a serial interface using the following specific details: disable the
multi-processor communication mode: UCSR0A &= 0xFE;
– turn off the RX complete interrupt, turn
off the TX complete interrupt, turn off the data register
empty interrupt, (In fact, turn off ALL USART0 interrupts.):
UCSR0B &= 0x1F;
– turn on the receiver, turn on the transmitter:
UCSR0B |= 0x10;
UCSR0B |= 0x08;
– set the character size to 8 bits:
UCSR0C |= 0x06;
– use the asynchronous USART mode:
UCSR0C &= 0x3F;
– use no parity:
UCSR0C &= 0xCF;
– use 1 stop bit:
UCSR0C &= 0xF7;
– set the baud rate to 115200 bits per second:
UCSR0C = 0x07;
2.) Create a function that initializes the USART based on the values determined
in problem 1.
void UOinitialization(){
// 16 MHz frequency
unsigned long FCPU = 16000000;
// UBRR value
unsigned int tbaud;
// U0baud calculation given
tbaud = (FCPU / 16 / 115200 – 1);
// disable MPCM
UCSR0A = 0x20
\end{lstlisting}

  \textbf{Solution}

\begin{comment}
\end{homeworkProblem}
\pagebreak

\begin{homeworkProblem}

\begin{lstlisting}
The international tuning standard for musical instruments is A above middle C
at a frequency of 440Hz. Write an Arduino Mega C language program to generate
this tuning frequency and sound a 440 Hz tone on a loudspeaker connected to
PortB.6 using Timer 1.
\end{lstlisting}

  \textbf{Solution}


\end{homeworkProblem}
\pagebreak


\begin{homeworkProblem}
\begin{lstlisting}
Write an Arduino Mega C language program using the Arduino ATmega2560 timer1 in
Normal mode to generate a 12 kHz square wave on PortB.6 using Timer 1.
\end{lstlisting}

  \textbf{Solution}

\end{homeworkProblem}

\pagebreak

\begin{homeworkProblem}

\begin{lstlisting}
Write an Arduino Mega C language program to generate a 500Hz signal on PortB.6
using Timer 1 in Normal mode. The wave should have a 30% duty cycle (duty cycle
= high time / period).
\end{lstlisting}

  \textbf{Solution}

\end{homeworkProblem}
\pagebreak

\end{comment}
\end{document}
